<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Beställningsformulär - IFK Lidingö Bordtennis</title>
  <style>
    /* Grundläggande layout och styling */
    body {
      margin: 0; 
      padding: 0; 
      font-family: Arial, sans-serif; 
      background-color: #001F3F; /* Marinblå bakgrund */
      color: #fff;
    }
    .container {
      display: flex; 
      min-height: 100vh; 
      align-items: flex-start; 
      justify-content: center;
    }
    .left-col, .right-col {
      flex: 1; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      justify-content: flex-start; 
      gap: 20px; /* Avstånd mellan boxarna */
      padding: 20px;
    }
    .center-col {
      flex: 3; 
      padding: 20px; 
      display: flex; 
      align-items: center; 
      justify-content: center;
    }

    /* Kategori-boxar (4 st: Blades, Rubbers, Apparel, Alla produkter) */
    .category-box {
      background-color: #00264D;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      width: 180px;
    }
    .category-box img {
      width: 100%;
      border-radius: 6px;
    }
    .category-box p {
      margin: 8px 0 0;
      color: #fff;
    }

    /* Formulär (anpassat för gratis-Formspree) */
    form {
      background-color: #fff;
      color: #333;
      padding: 20px;
      border-radius: 8px;
      max-width: 700px;
      width: 100%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      position: relative;
    }
    form h2 {
      margin-top: 0;
    }
    label {
      display: block;
      font-weight: bold;
      margin-top: 10px;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    input[type="number"] {
      max-width: 100px;
    }
    .product {
      border: 1px solid #ccc; 
      padding: 15px; 
      margin-bottom: 20px; 
      border-radius: 4px;
      background: #f9f9f9;
    }
    .product img {
      max-width: 120px; 
      display: block; 
      margin-bottom: 10px;
    }
    .total-container {
      background: #eef; 
      padding: 15px; 
      margin: 15px 0; 
      border-radius: 4px; 
      font-weight: bold;
      color: #333;
    }
    .total-container small {
      display: block;
      margin-top: 5px;
      color: #999;
      font-weight: normal;
      font-size: 0.9rem;
    }
    input[type="submit"], button {
      background-color: #007bff; 
      color: #fff; 
      border: none; 
      cursor: pointer; 
      padding: 15px;
      font-size: 1rem;
      border-radius: 4px;
    }
    input[type="submit"]:hover, button:hover {
      background-color: #0056b3;
    }

    /* Tackmeddelande overlay */
    .thank-you-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(0, 0, 0, 0.8);
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      border-radius: 8px;
      z-index: 999;
      display: none; /* Dölj tills formulär skickas */
    }
    .thank-you-overlay h2 {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<div class="container">
  
  <!-- VÄNSTER KOLUMN: 4 länkar (Blades, Rubbers, Apparel, Alla produkter) -->
  <div class="left-col">
    <!-- Blades -->
    <div class="category-box">
      <a href="https://yasakatabletennis.com/product-category/blades" target="_blank">
        <img 
          src="https://yasakatabletennis.com/wp-content/uploads/2023/08/yasaka-blades-example.jpg"
          alt="Yasaka Blades" 
        />
        <p>Se Blades</p>
      </a>
    </div>
    <!-- Rubbers -->
    <div class="category-box">
      <a href="https://yasakatabletennis.com/product-category/rubbers" target="_blank">
        <img 
          src="https://yasakatabletennis.com/wp-content/uploads/2023/08/yasaka-rubbers-example.jpg"
          alt="Yasaka Rubbers" 
        />
        <p>Se Rubbers</p>
      </a>
    </div>
    <!-- Apparel -->
    <div class="category-box">
      <a href="https://yasakatabletennis.com/product-category/apparel" target="_blank">
        <img 
          src="https://yasakatabletennis.com/wp-content/uploads/2023/08/yasaka-apparel-example.jpg"
          alt="Yasaka Apparel" 
        />
        <p>Se Apparel</p>
      </a>
    </div>
    <!-- Alla produkter -->
    <div class="category-box">
      <a href="https://yasakatabletennis.com/products/" target="_blank">
        <img 
          src="https://yasakatabletennis.com/wp-content/uploads/2023/08/yasaka-all-products-example.jpg"
          alt="Alla produkter" 
        />
        <p>Alla Produkter</p>
      </a>
    </div>
  </div>

  <!-- MITTKOLUMN: Formuläret -->
  <div class="center-col">

    <form action="https://formspree.io/f/xoveqpdr" method="POST" onsubmit="handleSubmit(event)">
      
      <!-- Dold input: Ämne på mejlet -->
      <input type="hidden" name="_subject" value="Ny beställning - IFK Lidingö Bordtennis" />
      <!-- Dold input: reply-to (så ni kan svara kund) -->
      <input type="hidden" name="_replyto" id="replyToField" value="" />
      <!-- Dold input: Beställningstext -->
      <input type="hidden" name="Beställning" id="order_summary" />

      <h2>Kunduppgifter</h2>
      <label for="namn">För- och efternamn:</label>
      <input type="text" id="namn" name="namn" required />

      <label for="adress">Leveransadress:</label>
      <textarea id="adress" name="adress" rows="2" required></textarea>

      <label for="mobilnummer">Mobilnummer:</label>
      <input type="tel" id="mobilnummer" name="mobilnummer" required />

      <label for="mejl">Mejladress:</label>
      <input type="email" id="mejl" name="mejl" required />

      <h2>Välj plagg, storlek och antal:</h2>

      <!-- T-shirt #1 -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/b1/ce/7e/1713786743/donic-t-shirt-drop-navy_1920x1920.jpg" 
          alt="Donic T-shirt Drop Navy #1" />
        <p><strong>Donic T-shirt Drop Navy/Cyanblue #1</strong><br/>
        Pris/st: <span id="tshirt_pris1">525</span> kr<br/>
        Namntryck: +100 kr</p>
        <label for="tshirt_size1">Storlek</label>
        <select id="tshirt_size1">
          <option value="">(Ingen)</option>
          <option value="140"  data-article="S82440231">140</option>
          <option value="152"  data-article="S82440232">152</option>
          <option value="XXS"  data-article="S82440233">XXS</option>
          <option value="XS"   data-article="S82440234">XS</option>
          <option value="S"    data-article="S82440235">S</option>
          <option value="M"    data-article="S82440236">M</option>
          <option value="L"    data-article="S82440237">L</option>
          <option value="XL"   data-article="S82440238">XL</option>
          <option value="XXL"  data-article="S82440239">XXL</option>
          <option value="XXXL" data-article="S82440240">XXXL</option>
        </select>
        <label for="tshirt_qty1">Antal</label>
        <input type="number" id="tshirt_qty1" min="0" value="0" />
        <label for="tshirt_namntryck1">Namntryck</label>
        <input type="text" id="tshirt_namntryck1" placeholder="Ex: Falkehag" />
      </div>

      <!-- T-shirt #2 -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/b1/ce/7e/1713786743/donic-t-shirt-drop-navy_1920x1920.jpg" 
          alt="Donic T-shirt Drop Navy #2" />
        <p><strong>Donic T-shirt Drop Navy/Cyanblue #2</strong><br/>
        Pris/st: <span id="tshirt_pris2">525</span> kr<br/>
        Namntryck: +100 kr</p>
        <label for="tshirt_size2">Storlek</label>
        <select id="tshirt_size2">
          <option value="">(Ingen)</option>
          <option value="140"  data-article="S82440231">140</option>
          <option value="152"  data-article="S82440232">152</option>
          <option value="XXS"  data-article="S82440233">XXS</option>
          <option value="XS"   data-article="S82440234">XS</option>
          <option value="S"    data-article="S82440235">S</option>
          <option value="M"    data-article="S82440236">M</option>
          <option value="L"    data-article="S82440237">L</option>
          <option value="XL"   data-article="S82440238">XL</option>
          <option value="XXL"  data-article="S82440239">XXL</option>
          <option value="XXXL" data-article="S82440240">XXXL</option>
        </select>
        <label for="tshirt_qty2">Antal</label>
        <input type="number" id="tshirt_qty2" min="0" value="0"/>
        <label for="tshirt_namntryck2">Namntryck</label>
        <input type="text" id="tshirt_namntryck2" placeholder="Ex: Falkehag" />
      </div>

      <!-- Shorts #1 -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/b1/6d/05/1714998783/donic-shorts-beam-navy_1920x1920.jpg"
          alt="Yasaka Shorts #1"/>
        <p><strong>Yasaka Shorts Navy #1</strong><br/>
        Pris/st: <span id="shorts_pris1">300</span> kr</p>
        <label for="shorts_size1">Storlek</label>
        <select id="shorts_size1">
          <option value="">(Ingen)</option>
          <option value="140" data-article="S75900321">140</option>
          <option value="152" data-article="S75900322">152</option>
          <option value="2XS" data-article="S75900323">2XS</option>
          <option value="XS"  data-article="S75900324">XS</option>
          <option value="S"   data-article="S75900325">S</option>
          <option value="M"   data-article="S75900326">M</option>
          <option value="L"   data-article="S75900327">L</option>
          <option value="XL"  data-article="S75900328">XL</option>
          <option value="2XL" data-article="S75900329">2XL</option>
          <option value="3XL" data-article="S75900330">3XL</option>
          <option value="4XL" data-article="S75900331">4XL</option>
        </select>
        <label for="shorts_qty1">Antal</label>
        <input type="number" id="shorts_qty1" min="0" value="0" />
      </div>

      <!-- Shorts #2 -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/b1/6d/05/1714998783/donic-shorts-beam-navy_1920x1920.jpg"
          alt="Yasaka Shorts #2"/>
        <p><strong>Yasaka Shorts Navy #2</strong><br/>
        Pris/st: <span id="shorts_pris2">300</span> kr</p>
        <label for="shorts_size2">Storlek</label>
        <select id="shorts_size2">
          <option value="">(Ingen)</option>
          <option value="140" data-article="S75900321">140</option>
          <option value="152" data-article="S75900322">152</option>
          <option value="2XS" data-article="S75900323">2XS</option>
          <option value="XS"  data-article="S75900324">XS</option>
          <option value="S"   data-article="S75900325">S</option>
          <option value="M"   data-article="S75900326">M</option>
          <option value="L"   data-article="S75900327">L</option>
          <option value="XL"  data-article="S75900328">XL</option>
          <option value="2XL" data-article="S75900329">2XL</option>
          <option value="3XL" data-article="S75900330">3XL</option>
          <option value="4XL" data-article="S75900331">4XL</option>
        </select>
        <label for="shorts_qty2">Antal</label>
        <input type="number" id="shorts_qty2" min="0" value="0" />
      </div>

      <!-- Overalls existerar redan (1 & 2), hoppa in dem här eller återanvänd Donic-länkar -->

      <!-- Totalsumma (text) -->
      <div class="total-container">
        <div id="totalDisplay">Totalt: 0 kr</div>
        <small>Fraktkostnad tillkommer</small>
      </div>

      <input type="submit" value="Skicka Beställning" />

      <!-- Tack-overlay -->
      <div class="thank-you-overlay" id="thankYouOverlay">
        <h2>Tack för din beställning!</h2>
        <p>
          Vi har mottagit din order och hanterar den snarast.<br/>
          Du får ingen automatisk bekräftelse i gratisversionen,<br/>
          men vi återkommer via mejl för att bekräfta.<br/>
          Tack för ditt tålamod!
        </p>
      </div>

    </form>
  </div>

  <!-- HÖGER KOLUMN: Samma fyra länkar (Blades, Rubbers, Apparel, Alla produkter) -->
  <div class="right-col">

    <div class="category-box">
      <a href="https://yasakatabletennis.com/product-category/blades" target="_blank">
        <img 
          src="hhttps://bunny-wp-pullzone-2n5sdzke4o.b-cdn.net/wp-content/uploads/2024/09/header-blade.jpg"
          alt="Yasaka Blades" 
        />
        <p>Se Blades</p>
      </a>
    </div>

    <div class="category-box">
      <a href="https://yasakatabletennis.com/product-category/rubbers" target="_blank">
        <img 
          src="https://bunny-wp-pullzone-2n5sdzke4o.b-cdn.net/wp-content/uploads/2024/09/header-rubbers.jpg"
          alt="Yasaka Rubbers" 
        />
        <p>Se Rubbers</p>
      </a>
    </div>

    <div class="category-box">
      <a href="https://yasakatabletennis.com/product-category/apparel" target="_blank">
        <img 
          src="https://bunny-wp-pullzone-2n5sdzke4o.b-cdn.net/wp-content/uploads/2024/09/apparel-category.jpg"
          alt="Yasaka Apparel" 
        />
        <p>Se Apparel</p>
      </a>
    </div>

    <div class="category-box">
      <a href="https://yasakatabletennis.com/products/" target="_blank">
        <img 
          src="https://bunny-wp-pullzone-2n5sdzke4o.b-cdn.net/wp-content/uploads/2024/09/all-products.jpg"
          alt="Alla produkter" 
        />
        <p>Alla Produkter</p>
      </a>
    </div>
  </div>

</div>

<script>
/* ====== Samma JS-logik för pris, extrakostnad, totalsumma och beställningsöversikt ====== */

function getPrice(id) {
  return parseFloat(document.getElementById(id).textContent.trim());
}

// +100 kr om namntryck
function nameTryckExtraCost(nameFieldId) {
  const val = document.getElementById(nameFieldId).value.trim();
  return (val !== '') ? 100 : 0;
}

// Hämta artikelnummer 
function getSelectedArticle(selectId) {
  const sel = document.getElementById(selectId);
  const idx = sel.selectedIndex;
  if (idx === -1) return '(Ingen)';
  const opt = sel.options[idx];
  return opt.getAttribute('data-article') || '(Ingen)';
}

function calculateTotal() {
  /* T-shirt 1 */
  let tshirtPrice1 = getPrice('tshirt_pris1');
  let tshirtQty1   = parseInt(document.getElementById('tshirt_qty1').value) || 0;
  let tshirtNamn1  = nameTryckExtraCost('tshirt_namntryck1');

  /* T-shirt 2 */
  let tshirtPrice2 = getPrice('tshirt_pris2');
  let tshirtQty2   = parseInt(document.getElementById('tshirt_qty2').value) || 0;
  let tshirtNamn2  = nameTryckExtraCost('tshirt_namntryck2');

  /* Shorts 1 */
  let shortsPrice1 = getPrice('shorts_pris1');
  let shortsQty1   = parseInt(document.getElementById('shorts_qty1').value) || 0;

  /* Shorts 2 */
  let shortsPrice2 = getPrice('shorts_pris2');
  let shortsQty2   = parseInt(document.getElementById('shorts_qty2').value) || 0;

  // Vill du också ha Overalls 1 & 2? Kopiera logik och IDer precis som T-shirt, Shorts.
  // Om du redan har Overalls i formuläret, lägg in dem här.

  // Summera
  let total = (tshirtPrice1 * tshirtQty1 + tshirtNamn1 * tshirtQty1)
            + (tshirtPrice2 * tshirtQty2 + tshirtNamn2 * tshirtQty2)
            + (shortsPrice1 * shortsQty1)
            + (shortsPrice2 * shortsQty2);
  // + Overalls etc. (lägg till om du har dem i koden!)

  document.getElementById('totalDisplay').textContent = `Totalt: ${total} kr`;
  return total;
}

function buildSummary() {
  let total = calculateTotal();

  let kundNamn   = document.getElementById('namn').value;
  let kundAdress = document.getElementById('adress').value;
  let kundMobil  = document.getElementById('mobilnummer').value;
  let kundMejl   = document.getElementById('mejl').value;

  // T-shirt #1
  let tshirtSize1 = document.getElementById('tshirt_size1').value || '(Ingen)';
  let tshirtArt1  = getSelectedArticle('tshirt_size1');
  let tshirtQty1  = document.getElementById('tshirt_qty1').value || '0';
  let tshirtNtryck1 = document.getElementById('tshirt_namntryck1').value.trim();
  let tshirtCost1 = getPrice('tshirt_pris1');

  // T-shirt #2
  let tshirtSize2 = document.getElementById('tshirt_size2').value || '(Ingen)';
  let tshirtArt2  = getSelectedArticle('tshirt_size2');
  let tshirtQty2  = document.getElementById('tshirt_qty2').value || '0';
  let tshirtNtryck2 = document.getElementById('tshirt_namntryck2').value.trim();
  let tshirtCost2 = getPrice('tshirt_pris2');

  // Shorts #1
  let shortsSize1 = document.getElementById('shorts_size1').value || '(Ingen)';
  let shortsArt1  = getSelectedArticle('shorts_size1');
  let shortsQty1  = document.getElementById('shorts_qty1').value || '0';
  let shortsCost1 = getPrice('shorts_pris1');

  // Shorts #2
  let shortsSize2 = document.getElementById('shorts_size2').value || '(Ingen)';
  let shortsArt2  = getSelectedArticle('shorts_size2');
  let shortsQty2  = document.getElementById('shorts_qty2').value || '0';
  let shortsCost2 = getPrice('shorts_pris2');

  // Bygg text-sammanfattning
  let textSummary = `
**Kunduppgifter**
Namn: ${kundNamn}
Adress: ${kundAdress}
Mobil: ${kundMobil}
Mejl: ${kundMejl}

**T-shirt #1**
Storlek: ${tshirtSize1}
Artikelnummer: ${tshirtArt1}
Antal: ${tshirtQty1}
Namntryck: ${tshirtNtryck1 ? tshirtNtryck1 : 'Inget'}
Pris/st: ${tshirtCost1} kr (+100 kr om namntryck)

**T-shirt #2**
Storlek: ${tshirtSize2}
Artikelnummer: ${tshirtArt2}
Antal: ${tshirtQty2}
Namntryck: ${tshirtNtryck2 ? tshirtNtryck2 : 'Inget'}
Pris/st: ${tshirtCost2} kr (+100 kr om namntryck)

**Shorts #1**
Storlek: ${shortsSize1}
Artikelnummer: ${shortsArt1}
Antal: ${shortsQty1}
Pris/st: ${shortsCost1} kr

**Shorts #2**
Storlek: ${shortsSize2}
Artikelnummer: ${shortsArt2}
Antal: ${shortsQty2}
Pris/st: ${shortsCost2} kr

------------------
**Totalt beräknat pris:** ${total} kr
+ Fraktkostnad tillkommer
  `;

  // Lagra i dold fält
  document.getElementById('order_summary').value = textSummary;
  // Sätt reply-to = kundens mejl
  document.getElementById('replyToField').value = kundMejl;
}

function showThankYou() {
  const overlay = document.getElementById('thankYouOverlay');
  overlay.style.display = 'flex';
}

function handleSubmit(e) {
  // Bygg text-sammanfattningen
  buildSummary();
  // Visa tack-overlay 
  showThankYou();
  // Därefter skickas formuläret till Formspree
}

// Koppla event listeners för total
const fieldsToWatch = [
  'tshirt_qty1','tshirt_qty2','tshirt_namntryck1','tshirt_namntryck2',
  'shorts_qty1','shorts_qty2'
  // Om du lägger till Overalls här, lägg in dem
];
fieldsToWatch.forEach(id => {
  document.getElementById(id).addEventListener('input', calculateTotal);
});

// Initiera total
calculateTotal();
</script>

</body>
</html>
