<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Beställningsformulär - IFK Lidingö Bordtennis</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #001F3F; /* Marinblå bakgrund */
      color: #fff;
    }
    .container {
      display: flex;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
    }
    .left-col, .right-col {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 10px;
    }
    .left-col h1, .right-col h1 {
      font-size: 2rem;
      line-height: 1.2;
    }
    .center-col {
      flex: 3;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    form {
      background-color: #fff;
      color: #333;
      padding: 20px;
      border-radius: 8px;
      max-width: 700px;
      width: 100%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      position: relative;
    }
    .product {
      border: 1px solid #ccc; 
      padding: 15px; 
      margin-bottom: 20px; 
      border-radius: 4px;
      background: #f9f9f9;
    }
    .product img {
      max-width: 120px; 
      display: block; 
      margin-bottom: 10px;
    }
    label {
      font-weight: bold; 
      margin-top: 10px; 
      display: block;
    }
    input, select, textarea {
      width: 100%; 
      padding: 10px; 
      margin-bottom: 10px; 
      border: 1px solid #ccc; 
      border-radius: 4px;
      font-size: 1rem;
    }
    input[type="number"] {
      max-width: 100px;
    }
    .total-container {
      background: #eef; 
      padding: 15px; 
      margin: 15px 0; 
      border-radius: 4px; 
      font-weight: bold;
      color: #333;
    }
    .total-container small {
      display: block;
      margin-top: 5px;
      color: #999;
      font-weight: normal;
      font-size: 0.9rem;
    }
    input[type="submit"] {
      background-color: #007bff; 
      color: #fff; 
      border: none; 
      cursor: pointer; 
      padding: 15px;
      font-size: 1rem;
      border-radius: 4px;
    }
    input[type="submit"]:hover {
      background-color: #0056b3;
    }
    /* Tackmeddelande overlay */
    .thank-you-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(0, 0, 0, 0.8);
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      border-radius: 8px;
      z-index: 999;
      display: none; /* Dölj tills formulär skickas */
    }
    .thank-you-overlay h2 {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<div class="container">
  <!-- Vänstra kolumnen -->
  <div class="left-col">
    <h1>IFK<br/>Lidingö</h1>
  </div>

  <!-- Mitten: Formuläret -->
  <div class="center-col">

    <!-- Skicka ordern till Formspree -->
    <form action="https://formspree.io/f/xoveqpdr" method="POST" onsubmit="handleSubmit(event)">

      <!-- Dold input: Ni får ett tydligare mailämne -->
      <input type="hidden" name="_subject" value="Ny beställning - IFK Lidingö Bordtennis" />

      <!-- Dold input: Sätt reply-to så ni enkelt kan svara kund -->
      <input type="hidden" name="_replyto" id="replyToField" value="" />

      <!-- Dold input: Innehåller all text-sammanfattning av ordern -->
      <input type="hidden" name="Beställning" id="order_summary" />

      <h2>Kunduppgifter</h2>

      <label for="namn">För- och efternamn:</label>
      <input type="text" id="namn" name="namn" required />

      <label for="adress">Leveransadress:</label>
      <textarea id="adress" name="adress" rows="2" required></textarea>

      <label for="mobilnummer">Mobilnummer:</label>
      <input type="tel" id="mobilnummer" name="mobilnummer" required />

      <label for="mejl">Mejladress:</label>
      <input type="email" id="mejl" name="mejl" required />

      <h2>Välj plagg, storlek och antal:</h2>

      <!-- T-shirt #1 -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/b1/ce/7e/1713786743/donic-t-shirt-drop-navy_1920x1920.jpg" 
          alt="Donic T-shirt Drop Navy/Cyanblue #1" />
        <p><strong>Donic T-shirt Drop Navy/Cyanblue #1</strong><br/>
        Pris/st: <span id="tshirt_pris1">525</span> kr<br/>
        Namntryck: +100 kr</p>

        <label for="tshirt_size1">Storlek</label>
        <select id="tshirt_size1">
          <option value="">(Ingen)</option>
          <option value="140"  data-article="S82440231">140</option>
          <option value="152"  data-article="S82440232">152</option>
          <option value="XXS"  data-article="S82440233">XXS</option>
          <option value="XS"   data-article="S82440234">XS</option>
          <option value="S"    data-article="S82440235">S</option>
          <option value="M"    data-article="S82440236">M</option>
          <option value="L"    data-article="S82440237">L</option>
          <option value="XL"   data-article="S82440238">XL</option>
          <option value="XXL"  data-article="S82440239">XXL</option>
          <option value="XXXL" data-article="S82440240">XXXL</option>
        </select>

        <label for="tshirt_qty1">Antal</label>
        <input type="number" id="tshirt_qty1" min="0" value="0" />

        <label for="tshirt_namntryck1">Namntryck</label>
        <input type="text" id="tshirt_namntryck1" placeholder="Ex: Andersson" />
      </div>

      <!-- T-shirt #2 -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/b1/ce/7e/1713786743/donic-t-shirt-drop-navy_1920x1920.jpg" 
          alt="Donic T-shirt Drop Navy/Cyanblue #2" />
        <p><strong>Donic T-shirt Drop Navy/Cyanblue #2</strong><br/>
        Pris/st: <span id="tshirt_pris2">525</span> kr<br/>
        Namntryck: +100 kr</p>

        <label for="tshirt_size2">Storlek</label>
        <select id="tshirt_size2">
          <option value="">(Ingen)</option>
          <option value="140"  data-article="S82440231">140</option>
          <option value="152"  data-article="S82440232">152</option>
          <option value="XXS"  data-article="S82440233">XXS</option>
          <option value="XS"   data-article="S82440234">XS</option>
          <option value="S"    data-article="S82440235">S</option>
          <option value="M"    data-article="S82440236">M</option>
          <option value="L"    data-article="S82440237">L</option>
          <option value="XL"   data-article="S82440238">XL</option>
          <option value="XXL"  data-article="S82440239">XXL</option>
          <option value="XXXL" data-article="S82440240">XXXL</option>
        </select>

        <label for="tshirt_qty2">Antal</label>
        <input type="number" id="tshirt_qty2" min="0" value="0"/>

        <label for="tshirt_namntryck2">Namntryck</label>
        <input type="text" id="tshirt_namntryck2" placeholder="Ex: Andersson" />
      </div>

      <!-- Shorts -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/b1/6d/05/1714998783/donic-shorts-beam-navy_1920x1920.jpg" 
          alt="Donic Shorts Beam Navy"/>
        <p><strong>Donic Shorts Beam Navy</strong><br/>
        Pris/st: <span id="shorts_pris">300</span> kr</p>

        <label for="shorts_size">Storlek</label>
        <select id="shorts_size">
          <option value="">(Ingen)</option>
          <option value="140" data-article="S75900321">140</option>
          <option value="152" data-article="S75900322">152</option>
          <option value="2XS" data-article="S75900323">2XS</option>
          <option value="XS"  data-article="S75900324">XS</option>
          <option value="S"   data-article="S75900325">S</option>
          <option value="M"   data-article="S75900326">M</option>
          <option value="L"   data-article="S75900327">L</option>
          <option value="XL"  data-article="S75900328">XL</option>
          <option value="2XL" data-article="S75900329">2XL</option>
          <option value="3XL" data-article="S75900330">3XL</option>
          <option value="4XL" data-article="S75900331">4XL</option>
        </select>

        <label for="shorts_qty">Antal</label>
        <input type="number" id="shorts_qty" min="0" value="0" />
      </div>

      <!-- Overall #1 -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/a4/ba/13/1715162815/donic-tracksuit-capri-navy-player-web_1920x1920.jpg" 
          alt="Donic Overall Capri Navy #1"/>
        <p><strong>Donic Overall Capri Navy #1</strong><br/>
        Pris/st: <span id="ovr_pris1">1100</span> kr<br/>
        Namntryck: +100 kr</p>

        <label for="ovr_size1">Storlek</label>
        <select id="ovr_size1">
          <option value="">(Ingen)</option>
          <option value="140" data-article="S76022100">140</option>
          <option value="152" data-article="S76022200">152</option>
          <option value="2XS" data-article="S76022300">2XS</option>
          <option value="XS"  data-article="S76022400">XS</option>
          <option value="S"   data-article="S76022500">S</option>
          <option value="M"   data-article="S76022600">M</option>
          <option value="L"   data-article="S76022700">L</option>
          <option value="XL"  data-article="S76022800">XL</option>
          <option value="2XL" data-article="S76022900">2XL</option>
          <option value="3XL" data-article="S76023000">3XL</option>
          <option value="4XL" data-article="S76023100">4XL</option>
        </select>

        <label for="ovr_qty1">Antal</label>
        <input type="number" id="ovr_qty1" min="0" value="0" />

        <label for="ovr_namntryck1">Namntryck</label>
        <input type="text" id="ovr_namntryck1" placeholder="Ex: Andersson" />
      </div>

      <!-- Overall #2 -->
      <div class="product">
        <img 
          src="https://www.donic.com/thumbnail/a4/ba/13/1715162815/donic-tracksuit-capri-navy-player-web_1920x1920.jpg" 
          alt="Donic Overall Capri Navy #2"/>
        <p><strong>Donic Overall Capri Navy #2</strong><br/>
        Pris/st: <span id="ovr_pris2">1100</span> kr<br/>
        Namntryck: +100 kr</p>

        <label for="ovr_size2">Storlek</label>
        <select id="ovr_size2">
          <option value="">(Ingen)</option>
          <option value="140" data-article="S76022100">140</option>
          <option value="152" data-article="S76022200">152</option>
          <option value="2XS" data-article="S76022300">2XS</option>
          <option value="XS"  data-article="S76022400">XS</option>
          <option value="S"   data-article="S76022500">S</option>
          <option value="M"   data-article="S76022600">M</option>
          <option value="L"   data-article="S76022700">L</option>
          <option value="XL"  data-article="S76022800">XL</option>
          <option value="2XL" data-article="S76022900">2XL</option>
          <option value="3XL" data-article="S76023000">3XL</option>
          <option value="4XL" data-article="S76023100">4XL</option>
        </select>

        <label for="ovr_qty2">Antal</label>
        <input type="number" id="ovr_qty2" min="0" value="0" />

        <label for="ovr_namntryck2">Namntryck</label>
        <input type="text" id="ovr_namntryck2" placeholder="Ex: Falkehag" />
      </div>

      <!-- Totalsumma (text) -->
      <div class="total-container">
        <div id="totalDisplay">Totalt: 0 kr</div>
        <small>Fraktkostnad tillkommer</small>
      </div>

      <input type="submit" value="Skicka Beställning" />

      <!-- Tack-overlay -->
      <div class="thank-you-overlay" id="thankYouOverlay">
        <h2>Tack för din beställning!</h2>
        <p>
          Vi har mottagit din order och hanterar den snarast,<br/>
          leveranstid med tryck är 10 dagar,<br/>
          Tack för ditt tålamod!
        </p>
      </div>

    </form>
  </div>

  <div class="right-col">
    <h1>IFK<br/>Lidingö</h1>
  </div>
</div>

<script>
// Hämtar pris från <span> 
function getPrice(id) {
  return parseFloat(document.getElementById(id).textContent.trim());
}

// +100 kr om namntryck
function nameTryckExtraCost(nameFieldId) {
  const val = document.getElementById(nameFieldId).value.trim();
  return (val !== '') ? 100 : 0;
}

// Hämta artikelnummer 
function getSelectedArticle(selectId) {
  const sel = document.getElementById(selectId);
  const idx = sel.selectedIndex;
  if (idx === -1) return '(Ingen)';
  const opt = sel.options[idx];
  return opt.getAttribute('data-article') || '(Ingen)';
}

// Räkna ut total
function calculateTotal() {
  let tshirtPrice1 = getPrice('tshirt_pris1');
  let tshirtQty1   = parseInt(document.getElementById('tshirt_qty1').value) || 0;
  let tshirtNamn1  = nameTryckExtraCost('tshirt_namntryck1');

  let tshirtPrice2 = getPrice('tshirt_pris2');
  let tshirtQty2   = parseInt(document.getElementById('tshirt_qty2').value) || 0;
  let tshirtNamn2  = nameTryckExtraCost('tshirt_namntryck2');

  let shortsPrice  = getPrice('shorts_pris');
  let shortsQty    = parseInt(document.getElementById('shorts_qty').value) || 0;

  let ovrPrice1    = getPrice('ovr_pris1');
  let ovrQty1      = parseInt(document.getElementById('ovr_qty1').value) || 0;
  let ovrNamn1     = nameTryckExtraCost('ovr_namntryck1');

  let ovrPrice2    = getPrice('ovr_pris2');
  let ovrQty2      = parseInt(document.getElementById('ovr_qty2').value) || 0;
  let ovrNamn2     = nameTryckExtraCost('ovr_namntryck2');

  let total = (tshirtPrice1 * tshirtQty1 + tshirtNamn1 * tshirtQty1)
            + (tshirtPrice2 * tshirtQty2 + tshirtNamn2 * tshirtQty2)
            + (shortsPrice  * shortsQty)
            + (ovrPrice1    * ovrQty1 + ovrNamn1 * ovrQty1)
            + (ovrPrice2    * ovrQty2 + ovrNamn2 * ovrQty2);

  document.getElementById('totalDisplay').textContent = `Totalt: ${total} kr`;
  return total;
}

// Skapa textbaserad orderinfo
function buildSummary() {
  let total = calculateTotal();

  let kundNamn   = document.getElementById('namn').value;
  let kundAdress = document.getElementById('adress').value;
  let kundMobil  = document.getElementById('mobilnummer').value;
  let kundMejl   = document.getElementById('mejl').value;

  let tshirtSize1 = document.getElementById('tshirt_size1').value || '(Ingen)';
  let tshirtArt1  = getSelectedArticle('tshirt_size1');
  let tshirtQty1  = document.getElementById('tshirt_qty1').value || '0';
  let tshirtNtryck1 = document.getElementById('tshirt_namntryck1').value.trim();
  let tshirtCost1 = getPrice('tshirt_pris1');

  let tshirtSize2 = document.getElementById('tshirt_size2').value || '(Ingen)';
  let tshirtArt2  = getSelectedArticle('tshirt_size2');
  let tshirtQty2  = document.getElementById('tshirt_qty2').value || '0';
  let tshirtNtryck2 = document.getElementById('tshirt_namntryck2').value.trim();
  let tshirtCost2 = getPrice('tshirt_pris2');

  let shortsSize  = document.getElementById('shorts_size').value || '(Ingen)';
  let shortsArt   = getSelectedArticle('shorts_size');
  let shortsQty   = document.getElementById('shorts_qty').value || '0';
  let shortsCost  = getPrice('shorts_pris');

  let ovrSize1    = document.getElementById('ovr_size1').value || '(Ingen)';
  let ovrArt1     = getSelectedArticle('ovr_size1');
  let ovrQty1     = document.getElementById('ovr_qty1').value || '0';
  let ovrNtryck1  = document.getElementById('ovr_namntryck1').value.trim();
  let ovrCost1    = getPrice('ovr_pris1');

  let ovrSize2    = document.getElementById('ovr_size2').value || '(Ingen)';
  let ovrArt2     = getSelectedArticle('ovr_size2');
  let ovrQty2     = document.getElementById('ovr_qty2').value || '0';
  let ovrNtryck2  = document.getElementById('ovr_namntryck2').value.trim();
  let ovrCost2    = getPrice('ovr_pris2');

  let textSummary = `
**Kunduppgifter**
Namn: ${kundNamn}
Adress: ${kundAdress}
Mobil: ${kundMobil}
Mejl: ${kundMejl}

**T-shirt #1**
Storlek: ${tshirtSize1}
Artikelnummer: ${tshirtArt1}
Antal: ${tshirtQty1}
Namntryck: ${tshirtNtryck1 ? tshirtNtryck1 : 'Inget'}
Pris/st: ${tshirtCost1} kr (+100 kr om namntryck)

**T-shirt #2**
Storlek: ${tshirtSize2}
Artikelnummer: ${tshirtArt2}
Antal: ${tshirtQty2}
Namntryck: ${tshirtNtryck2 ? tshirtNtryck2 : 'Inget'}
Pris/st: ${tshirtCost2} kr (+100 kr om namntryck)

**Shorts Beam**
Storlek: ${shortsSize}
Artikelnummer: ${shortsArt}
Antal: ${shortsQty}
Pris/st: ${shortsCost} kr

**Overall #1**
Storlek: ${ovrSize1}
Artikelnummer: ${ovrArt1}
Antal: ${ovrQty1}
Namntryck: ${ovrNtryck1 ? ovrNtryck1 : 'Inget'}
Pris/st: ${ovrCost1} kr (+100 kr om namntryck)

**Overall #2**
Storlek: ${ovrSize2}
Artikelnummer: ${ovrArt2}
Antal: ${ovrQty2}
Namntryck: ${ovrNtryck2 ? ovrNtryck2 : 'Inget'}
Pris/st: ${ovrCost2} kr (+100 kr om namntryck)

------------------
**Totalt beräknat pris:** ${total} kr
+ Fraktkostnad tillkommer
  `;

  // Lägg i dold fält
  document.getElementById('order_summary').value = textSummary;

  // Sätt _replyto = kundens mejl så ni enkelt kan svara 
  document.getElementById('replyToField').value = kundMejl;
}

function showThankYou() {
  const overlay = document.getElementById('thankYouOverlay');
  overlay.style.display = 'flex';
}

function handleSubmit(e) {
  // Bygg text-sammanfattningen
  buildSummary();
  // Visa tack-overlay 
  showThankYou();
  // Låt sedan formuläret skicka till Formspree
}

// Koppla event listeners för total
const fieldsToWatch = [
  'tshirt_qty1','tshirt_qty2','tshirt_namntryck1','tshirt_namntryck2',
  'shorts_qty','ovr_qty1','ovr_namntryck1','ovr_qty2','ovr_namntryck2'
];
fieldsToWatch.forEach(id => {
  document.getElementById(id).addEventListener('input', calculateTotal);
});

// Initiera total
calculateTotal();
</script>

</body>
</html>
